{
  "version": "1.13.0",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Calibration Memo Schema",
  "description": "Defines the structure for cycle calibration memos that guide the next READY phase. Created at the end of each FIRE cycle to capture learnings, validate assumptions, and calibrate strategy for the next iteration.",
  "$comment": "Calibration Memos are the reflection and learning mechanism in EPF. They answer: What did we learn? What should we change? What's our confidence? They directly feed the next READY phase with validated learnings, preventing strategy drift and ensuring continuous improvement. Write them immediately after completing a FIRE cycle while insights are fresh.",
  "type": "object",
  "properties": {
    "roadmap_id": {
      "type": "string",
      "description": "Reference to the completed roadmap. Links this calibration to the specific roadmap it reflects on, enabling traceability of decisions across cycles.",
      "$comment": "Use the roadmap artifact ID (e.g., 'rm-001-q1-2024'). This creates an audit trail: Roadmap → Execution → Calibration → Next Roadmap. Essential for understanding how strategy evolved.",
      "minLength": 5,
      "maxLength": 50,
      "pattern": "^[a-z0-9-]+$"
    },
    "cycle": {
      "type": "integer",
      "description": "The cycle number this calibration reflects on. Cycles are sequential iterations of the EPF loop (READY → FIRE → AIM).",
      "$comment": "Start at 1 for first cycle. Increment for each complete loop. Use this to track velocity: How many cycles per quarter? How long are cycles? Are you iterating faster over time?",
      "minimum": 1,
      "maximum": 100
    },
    "assessment_date": {
      "type": ["string", "null"],
      "description": "Date when the calibration was performed. ISO 8601 format (YYYY-MM-DD).",
      "$comment": "Should be within 1-2 weeks of roadmap completion. Longer gaps reduce insight quality. Null only if calibration is pending. Track time-to-calibration as a team health metric.",
      "format": "date",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
    },
    "decision": {
      "type": "string",
      "enum": ["persevere", "pivot", "pull_the_plug", "pending_assessment"],
      "description": "The strategic decision for next steps based on cycle learnings and evidence.",
      "$comment": "PERSEVERE: Core strategy working, keep building. PIVOT: Need strategic change (different segment, value prop, approach). PULL_THE_PLUG: Evidence shows fundamental flaw, stop this initiative. PENDING_ASSESSMENT: Need more data before deciding (valid for early cycles only, not a permanent state). Most cycles should be 'persevere' with tactical adjustments. Pivots should be rare but decisive. Pull-the-plug requires clear evidence of wasted effort."
    },
    "confidence": {
      "type": "string",
      "enum": ["low", "medium", "high"],
      "description": "Confidence level in the decision based on evidence quality, data volume, and signal clarity.",
      "$comment": "LOW: Limited data, unclear signals, high uncertainty (common in first 1-2 cycles). MEDIUM: Some data, mixed signals, reasonable confidence (typical for cycles 3-5). HIGH: Strong data, clear signals, high certainty (should achieve by cycle 6+). If still 'low' after 4+ cycles, question the measurement strategy or experiment design. Track confidence evolution as a learning velocity metric."
    },
    "reasoning": {
      "type": "string",
      "description": "Explanation for the decision. Connect evidence from the cycle to the decision, showing the logical chain: data → insight → decision.",
      "$comment": "Structure: (1) What we expected vs what happened, (2) Key evidence that drove decision, (3) Why this decision over alternatives. Be specific: 'User retention was 15% vs target 40%, indicating value prop mismatch' not 'retention was low'. Include both quantitative metrics and qualitative insights. Reference specific roadmap items and their outcomes.",
      "minLength": 100,
      "maxLength": 2000
    },
    "learnings": {
      "type": "object",
      "description": "Structured capture of what the cycle taught us about assumptions, beliefs, and strategy.",
      "$comment": "This is the core learning mechanism. Validated assumptions strengthen strategy confidence. Invalidated assumptions trigger strategic adjustments. Surprises reveal blind spots and new opportunities. Be brutally honest here—learning requires acknowledging when you were wrong.",
      "properties": {
        "validated_assumptions": {
          "type": "array",
          "description": "Assumptions that proved correct during the cycle. These become beliefs that inform future strategy.",
          "$comment": "Format: 'We assumed [X], and evidence showed [Y], confirming [Z].' Example: 'We assumed SMBs would pay for time-to-value, and 40% converted within 48h, confirming pricing strategy.' Validated assumptions reduce uncertainty and focus future effort. Move these to North Star core beliefs if repeatedly validated.",
          "items": {
            "type": "string",
            "minLength": 30,
            "maxLength": 300
          },
          "minItems": 0,
          "maxItems": 10
        },
        "invalidated_assumptions": {
          "type": "array",
          "description": "Assumptions that proved incorrect. These require strategic adjustment.",
          "$comment": "Format: 'We assumed [X], but evidence showed [Y], requiring [Z].' Example: 'We assumed users would discover features organically, but 80% never found key workflows, requiring onboarding investment.' Be specific about implications. Each invalidated assumption should inform a 'stop_building' or 'start_exploring' decision.",
          "items": {
            "type": "string",
            "minLength": 30,
            "maxLength": 300
          },
          "minItems": 0,
          "maxItems": 10
        },
        "surprises": {
          "type": "array",
          "description": "Unexpected discoveries—things we didn't anticipate that proved important.",
          "$comment": "Format: 'We discovered [X], which suggests [Y].' Example: 'We discovered power users create 10x more content than average, suggesting a creator-first strategy.' Surprises are often the most valuable learnings—they reveal what you don't know. Some surprises become new opportunities (feed to insight_opportunity). Others become new assumptions to test next cycle.",
          "items": {
            "type": "string",
            "minLength": 30,
            "maxLength": 300
          },
          "minItems": 0,
          "maxItems": 10
        }
      },
      "required": ["validated_assumptions", "invalidated_assumptions", "surprises"]
    },
    "next_cycle_focus": {
      "type": "object",
      "description": "Strategic adjustments for the next cycle based on learnings. The Start/Stop/Continue framework translated to action.",
      "$comment": "This section directly shapes the next roadmap. CONTINUE: Keep building what's working (validated assumptions). STOP: Abandon what's not working (invalidated assumptions, low-value areas). START: Explore new directions (surprises, pivots). Be decisive: stopping requires courage, starting requires discipline. Each item should trace back to a specific learning.",
      "properties": {
        "continue_building": {
          "type": "array",
          "description": "Capabilities, features, or approaches to keep investing in because they're working.",
          "$comment": "Only include items with clear evidence of value. Format: 'Keep building [X] because [evidence].' Example: 'Keep building collaborative workflows because team accounts have 3x retention.' Reference validated assumptions. These become foundational capabilities over time.",
          "items": {
            "type": "string",
            "minLength": 30,
            "maxLength": 200
          },
          "minItems": 0,
          "maxItems": 8
        },
        "stop_building": {
          "type": "array",
          "description": "Capabilities, features, or approaches to stop investing in because they're not delivering value.",
          "$comment": "Format: 'Stop building [X] because [evidence].' Example: 'Stop building advanced analytics because <5% usage despite investment.' Reference invalidated assumptions. Stopping is strategic—it frees resources for higher-value work. Don't confuse 'stop building' (no new investment) with 'deprecate' (remove existing). Some features can stay with zero investment.",
          "items": {
            "type": "string",
            "minLength": 30,
            "maxLength": 200
          },
          "minItems": 0,
          "maxItems": 8
        },
        "start_exploring": {
          "type": "array",
          "description": "New directions to explore based on surprises, pivots, or identified gaps.",
          "$comment": "Format: 'Start exploring [X] because [reasoning].' Example: 'Start exploring API-first architecture because 30% of users requested integrations.' Reference surprises or strategic pivots. These are experiments, not commitments. Next roadmap should include small tests to validate direction before major investment.",
          "items": {
            "type": "string",
            "minLength": 30,
            "maxLength": 200
          },
          "minItems": 0,
          "maxItems": 8
        }
      },
      "required": ["continue_building", "stop_building", "start_exploring"]
    },
    "next_ready_inputs": {
      "type": "object",
      "description": "Specific updates to feed into the next READY phase. Direct inputs to opportunity assessment and strategy refresh.",
      "$comment": "This section ensures learnings actually inform next cycle. Opportunity updates reflect market/user changes. Strategy updates reflect approach changes. New assumptions are hypotheses to test. These directly update insight_opportunity, strategy_foundations, and roadmap_recipe for next cycle.",
      "properties": {
        "opportunity_update": {
          "type": "string",
          "description": "How the cycle changed our understanding of the opportunity. Updates to market dynamics, user needs, or competitive landscape.",
          "$comment": "Format: (1) What changed in our understanding, (2) New evidence or insights, (3) Implications for strategy. Example: 'Market is more price-sensitive than assumed. 60% of trials cited cost concerns. Implies need for freemium tier or value-based pricing.' This updates the insight_opportunity for next cycle.",
          "minLength": 100,
          "maxLength": 1000
        },
        "strategy_update": {
          "type": "string",
          "description": "How the cycle changed our strategic approach. Updates to positioning, ICP, value prop, or delivery model.",
          "$comment": "Format: (1) What we're changing in our approach, (2) Why based on evidence, (3) What stays the same. Example: 'Shifting from horizontal (all SMBs) to vertical (dental practices). They have 5x WTP and common workflows. Core tech/value prop unchanged.' This updates strategy_foundations for next cycle.",
          "minLength": 100,
          "maxLength": 1000
        },
        "new_assumptions": {
          "type": "array",
          "description": "New assumptions to test in the next cycle. These become experiments in the next roadmap.",
          "$comment": "Format: 'If we [action], then [expected outcome], because [reasoning].' Example: 'If we add mobile app, then active usage will increase 40%, because 60% of users work remotely.' Make assumptions testable and falsifiable. Each should be small enough to validate in one cycle. These feed directly into next roadmap's experiments.",
          "items": {
            "type": "string",
            "minLength": 50,
            "maxLength": 300
          },
          "minItems": 0,
          "maxItems": 10
        }
      },
      "required": ["opportunity_update", "strategy_update", "new_assumptions"]
    },
    "next_steps": {
      "type": "array",
      "description": "Immediate actions required before starting the next cycle. Tactical next steps, not strategic direction.",
      "$comment": "Format: '[Who] will [action] by [when].' Example: 'Product team will prototype freemium tier by Feb 15.' 'Strategy lead will update insight_opportunity by Feb 10.' Keep to 3-7 items. Should be completable within 2 weeks. Include both execution items (build X) and planning items (update strategy docs). Assign owners and deadlines.",
      "items": {
        "type": "string",
        "minLength": 20,
        "maxLength": 200
      },
      "minItems": 1,
      "maxItems": 10
    }
  },
  "required": ["roadmap_id", "cycle", "decision", "reasoning", "learnings", "next_cycle_focus", "next_ready_inputs", "next_steps"]
}
