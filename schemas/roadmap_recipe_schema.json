{
  "version": "1.13.0",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Roadmap Recipe Schema",
  "description": "Defines the structure for track-based strategic roadmaps in the ROADMAP phase (EPF Phase 5). Roadmaps translate strategy into execution plans across four parallel tracks (Product, Strategy, OrgOps, Commercial) using OKR methodology. Each track defines Objectives and Key Results (KRs) as the lowest EPF-managed level—detailed work breakdown happens downstream in spec-driven tools (Linear, Jira, Notion). This schema enables strategic alignment, cross-track dependency management, and milestone planning while maintaining clear boundaries with tactical execution systems.",
  "$comment": "ROADMAP RECIPE ARCHITECTURE: This schema defines the bridge between strategy (what we want to achieve) and execution (how we'll build it). A roadmap recipe answers five critical questions: (1) What are we trying to achieve? (OKRs per track), (2) What do we need to validate? (riskiest assumptions), (3) How will we build it? (solution scaffold), (4) What depends on what? (cross-track dependencies), (5) When will key milestones happen? (execution plan). The roadmap operates at the STRATEGIC level—it defines Objectives (aspirational goals) and Key Results (measurable outcomes) but stops before detailed feature specs or work tickets. This boundary is intentional: EPF roadmaps focus on WHAT and WHY, while spec-driven tools (Linear, Jira) handle HOW and WHEN at the task level. Four-track structure matches value model organization: Product track (customer-facing capabilities), Strategy track (market positioning, GTM, partnerships), OrgOps track (internal operations, processes, culture), Commercial track (monetization, sales, customer success). Each track is semi-independent with its own OKRs but coordinated through cross-track dependencies. Lifecycle: Roadmap starts as 'draft' during planning, moves to 'approved' after stakeholder alignment, becomes 'active' during execution, ends as 'completed' or 'cancelled'. Roadmaps typically span 1-3 cycles (quarters/half-years) and reference a parent strategy document. Design principles: (1) Outcome-focused (KRs measure impact, not output), (2) Track-aligned (matches value model structure), (3) Dependency-explicit (cross-track links are first-class), (4) Assumption-driven (identify and track riskiest assumptions), (5) Milestone-oriented (key decision points and releases), (6) Tool-agnostic (doesn't dictate implementation tools). Common usage patterns: Strategic planning cycles (quarterly/annual roadmap creation), Cross-functional alignment (ensure tracks are coordinated), Dependency management (identify blockers and sequencing), Progress tracking (monitor KR achievement), Assumption validation (test riskiest assumptions first), Milestone planning (release dates, board reviews, funding rounds). Examples: Early-stage startup (Product: Build MVP, Strategy: Define ICP, OrgOps: Hire founding team, Commercial: Establish pricing), Growth-stage product (Product: Expand platform, Strategy: Enter new vertical, OrgOps: Scale eng team, Commercial: Launch enterprise tier), Mature organization (Product: Technical debt paydown, Strategy: International expansion, OrgOps: Improve efficiency, Commercial: Optimize unit economics). Anti-patterns to avoid: Roadmaps that are just feature lists (should be outcome-focused), OKRs that are really tasks (should be measurable impacts), Missing cross-track dependencies (leads to coordination failures), Solution scaffolds that are too detailed (belongs in spec docs), Key Results without clear measurement (can't track progress), Assumptions that aren't actually risky (clutters tracking).",
  "type": "object",
  "properties": {
    "roadmap": {
      "type": "object",
      "description": "Root container for a strategic roadmap spanning one or more cycles. Contains track-based OKRs, execution plan, dependencies, and metadata. A roadmap translates strategic intent into measurable outcomes while maintaining coordination across organizational functions.",
      "$comment": "ROADMAP STRUCTURE: The roadmap object is the complete execution plan for a strategy over a defined timeframe. It includes: (1) Metadata (id, cycle, timeframe, status, dates), (2) Strategy link (strategy_id connects to parent strategy doc), (3) Four parallel tracks (each with OKRs, assumptions, solution scaffold), (4) Cross-track dependencies (explicit coordination points), (5) Execution plan (sequencing, milestones, critical path). The roadmap is immutable once approved—changes require new version or amendment process. Roadmaps are typically created during strategic planning cycles (quarterly, annual) and reviewed regularly during execution. Status transitions: draft → approved → active → completed/cancelled. The roadmap stops at Key Result level—detailed feature specs, user stories, and work tickets are created downstream in spec-driven tools (Linear, Jira, Notion) based on this strategic foundation. This separation ensures EPF focuses on strategic coherence while execution tools handle tactical flexibility.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the roadmap using kebab-case naming convention. Format: 'roadmap-{strategy-ref}-{cycle}' (e.g., 'roadmap-growth-2024-q1', 'roadmap-series-a-h2'). Must be globally unique within the organization's EPF instance. Used for cross-document references and version tracking.",
          "pattern": "^roadmap-[a-z0-9]+(-[a-z0-9]+)*$",
          "minLength": 10,
          "maxLength": 80,
          "examples": ["roadmap-mvp-launch-q1", "roadmap-series-a-2024-h1", "roadmap-expansion-emea-2024"]
        },
        "strategy_id": {
          "type": "string",
          "description": "Reference to the parent strategy document that this roadmap implements. Links roadmap to strategic intent, enabling traceability from high-level strategy to tactical execution. Format matches strategy document IDs (e.g., 'strategy-series-a', 'strategy-2024-growth'). Must reference an existing strategy document in the EPF system.",
          "pattern": "^strategy-[a-z0-9]+(-[a-z0-9]+)*$",
          "minLength": 10,
          "maxLength": 80,
          "examples": ["strategy-series-a-growth", "strategy-2024-expansion", "strategy-product-market-fit"]
        },
        "cycle": {
          "type": "integer",
          "description": "Numeric cycle identifier within the parent strategy. Cycles are sequential execution periods (typically quarters or half-years). First cycle = 1, increments for each subsequent period. Used for: (1) Tracking progress through multi-cycle strategies, (2) Organizing historical roadmaps, (3) Planning dependencies across cycles. Range: 1-20 (most strategies span 1-8 cycles).",
          "minimum": 1,
          "maximum": 20,
          "examples": [1, 2, 3, 4]
        },
        "timeframe": {
          "type": "string",
          "description": "Human-readable description of the roadmap's time period. Provides context for cycle numbers and helps stakeholders understand duration. Format: '{period} {year}' or '{year} {half/quarter}'. Length: 5-50 characters. Examples: 'Q1 2024', '2024 H1', 'January-March 2024', 'Winter 2024'.",
          "minLength": 5,
          "maxLength": 50,
          "examples": ["Q1 2024", "2024 H2", "January-March 2024", "Winter 2024", "First Half 2024"]
        },
        "tracks": {
          "type": "object",
          "description": "Four parallel execution tracks aligned with value model structure. Each track has independent OKRs but coordinates through cross-track dependencies. Tracks represent organizational functions: Product (customer-facing capabilities), Strategy (market positioning), OrgOps (internal operations), Commercial (monetization). All four tracks are required to ensure holistic planning.",
          "$comment": "TRACK ARCHITECTURE: The four-track structure mirrors value model organization and ensures balanced execution across organizational functions. Product track delivers customer value, Strategy track positions in market, OrgOps track builds organizational capability, Commercial track captures economic value. Tracks are semi-independent: each has own objectives, key results, assumptions, and solution scaffold, but they're coordinated through explicit cross-track dependencies. This structure prevents: (1) Product-only planning (ignoring GTM, ops, monetization), (2) Siloed execution (tracks work in isolation), (3) Implicit dependencies (coordination failures). Each track follows identical structure (OKRs, assumptions, solution scaffold) for consistency. Track naming convention: 'product', 'strategy', 'org_ops', 'commercial' (lowercase, underscores). All four tracks required even if some are minimal—this forces consideration of all dimensions. Track balance varies by organization stage: early-stage heavily weighted to Product, growth-stage balanced, mature organizations may emphasize Strategy/Commercial.",
          "properties": {
            "product": {
              "$ref": "#/definitions/track",
              "description": "Product track focuses on customer-facing capabilities, features, and user experiences. Defines what value will be delivered to customers and how product evolves. Typical objectives: Launch MVP, Expand platform, Improve UX, Add integrations. Key results measure: User adoption, Feature usage, Customer satisfaction, Platform stability."
            },
            "strategy": {
              "$ref": "#/definitions/track",
              "description": "Strategy track focuses on market positioning, go-to-market, partnerships, and competitive differentiation. Defines how product succeeds in market and relates to ecosystem. Typical objectives: Define ICP, Enter new vertical, Establish partnerships, Build brand. Key results measure: Market share, Brand awareness, Partner pipeline, Competitive positioning."
            },
            "org_ops": {
              "$ref": "#/definitions/track",
              "description": "Org/Ops track focuses on organizational capability, internal processes, team building, and operational excellence. Defines how organization scales and operates effectively. Typical objectives: Scale team, Improve efficiency, Build culture, Establish processes. Key results measure: Team growth, Operational metrics, Employee satisfaction, Process adoption."
            },
            "commercial": {
              "$ref": "#/definitions/track",
              "description": "Commercial track focuses on monetization, sales, customer success, and unit economics. Defines how value is captured and business becomes sustainable. Typical objectives: Launch pricing, Scale revenue, Optimize CAC, Expand accounts. Key results measure: Revenue growth, Customer acquisition, Expansion revenue, Unit economics."
            }
          },
          "required": ["product", "strategy", "org_ops", "commercial"]
        },
        "cross_track_dependencies": {
          "type": "array",
          "description": "Explicit dependencies between key results across tracks. Makes coordination needs visible and enables sequencing decisions. Each dependency specifies source KR, target KR, and relationship type (requires/informs/enables). Critical for: (1) Identifying blockers, (2) Sequencing work across tracks, (3) Preventing coordination failures, (4) Communicating cross-functional needs. Array can be empty if tracks are fully independent (rare).",
          "$comment": "CROSS-TRACK DEPENDENCY PATTERNS: Dependencies represent coordination needs between tracks. Three types: (1) 'requires' = hard dependency, target cannot proceed without source (e.g., Commercial pricing requires Product feature completion), (2) 'informs' = soft dependency, target benefits from source but can proceed (e.g., Strategy ICP definition informs Product roadmap but isn't blocking), (3) 'enables' = multiplicative dependency, source unlocks new possibilities for target (e.g., OrgOps hiring enables Product velocity increase). Dependencies flow in any direction: Product→Strategy (features inform GTM), Strategy→Product (market insights drive features), Product→Commercial (capabilities enable monetization), OrgOps→Product (team growth enables scope increase), etc. Common patterns: Product-Strategy coupling (features need GTM), Product-Commercial coupling (capabilities enable pricing), OrgOps-Product coupling (team size limits scope), Strategy-Commercial coupling (positioning drives pricing). Dependency modeling best practices: Make implicit dependencies explicit (forces conversation), Document rationale (why does target depend on source?), Review regularly (dependencies may change), Visualize as graph (see critical path), Minimize dependencies (prefer loose coupling). Anti-patterns: Circular dependencies (create deadlocks), Missing critical dependencies (coordination failures), Over-specified dependencies (false precision), Assumptions hidden in dependencies (surface separately). Typical roadmap has 5-15 cross-track dependencies—fewer than 5 suggests missing coordination, more than 20 suggests over-coupling.",
          "items": {
            "type": "object",
            "properties": {
              "from_kr": {
                "type": "string",
                "description": "Source Key Result ID that is being depended upon. Format: 'kr-{track-prefix}-{number}' where prefix is p (product), s (strategy), o (org_ops), or c (commercial). Must reference an existing KR in one of the four tracks. Example: 'kr-p-003' (product track, KR #3).",
                "pattern": "^kr-[psoc]-\\d{3}$",
                "examples": ["kr-p-001", "kr-s-002", "kr-o-003", "kr-c-004"]
              },
              "to_kr": {
                "type": "string",
                "description": "Target Key Result ID that depends on from_kr. Format same as from_kr. Must reference an existing KR, typically in a different track (but same-track dependencies allowed). Example: 'kr-c-001' depends on 'kr-p-003' (commercial pricing depends on product feature).",
                "pattern": "^kr-[psoc]-\\d{3}$",
                "examples": ["kr-p-002", "kr-s-001", "kr-o-004", "kr-c-003"]
              },
              "dependency_type": {
                "type": "string",
                "enum": ["requires", "informs", "enables"],
                "description": "Type of dependency relationship. 'requires' = hard blocker (to_kr cannot proceed without from_kr completion), 'informs' = soft dependency (to_kr benefits from from_kr but can proceed independently), 'enables' = multiplicative (from_kr unlocks new possibilities for to_kr). Choose based on coupling strength and sequencing needs."
              },
              "description": {
                "type": "string",
                "description": "Human-readable explanation of why the dependency exists and what coordination is needed. Include: (1) Nature of coupling, (2) Timing implications, (3) Risk if dependency ignored. Length: 30-500 characters. Example: 'Pricing strategy (kr-c-001) requires feature parity with competitors (kr-p-003) to be defensible in market. Must complete 2 weeks before launch.'",
                "minLength": 30,
                "maxLength": 500,
                "examples": [
                  "Commercial pricing depends on product feature set being competitive",
                  "GTM strategy informs product roadmap priorities but doesn't block development",
                  "Team hiring enables increased product velocity and parallel workstreams"
                ]
              }
            },
            "required": ["from_kr", "to_kr", "dependency_type"]
          }
        },
        "execution_plan": {
          "type": "object",
          "description": "High-level execution plan at Key Result level. Defines sequencing, critical path, parallel work opportunities, and key milestones. Does NOT define detailed work packages or tickets—that's the responsibility of spec-driven tools (Linear, Jira). The execution plan answers: (1) What's the critical path? (2) What can run in parallel? (3) When are key decision points? (4) Why this sequence?",
          "$comment": "EXECUTION PLAN PURPOSE: The execution plan bridges strategy (what to achieve) and execution (how to build). It operates at KR level—defining WHAT outcomes to sequence, not HOW tasks are organized. Downstream tools (Linear, Jira) break KRs into detailed work packages, stories, and tasks. Execution plan serves three audiences: (1) Leadership (strategic sequencing and milestone tracking), (2) Product teams (understand dependencies and coordination needs), (3) Spec-driven tools (provide context for work breakdown). Critical path identifies the longest sequence of dependent KRs—delays on critical path delay entire roadmap. Parallel tracks identify KRs that can be pursued simultaneously—enables team scaling and velocity. Milestones are key decision points (launches, board reviews, funding rounds) where multiple KRs converge. Sequencing rationale documents WHY this order was chosen (risk mitigation, dependency management, market timing, resource constraints). Execution plan should be reviewed regularly (weekly/biweekly) to track progress, identify blockers, adjust sequencing. Plan is mutable during execution—changes document as amendments. Anti-patterns: Execution plan that is too detailed (becomes outdated quickly), Critical path that is never reviewed (misses blocking issues), Parallel tracks without clear ownership (coordination failures), Milestones without clear KR completion criteria (ambiguous progress).",
          "properties": {
            "sequencing_rationale": {
              "type": "string",
              "description": "Explanation of why Key Results are sequenced in this order. Addresses: (1) Risk mitigation (validate riskiest assumptions first), (2) Dependency management (ensure prerequisites complete before dependents), (3) Market timing (align with external events, competitive moves), (4) Resource constraints (match to team availability and skills), (5) Value delivery (prioritize highest-impact outcomes). Length: 200-2000 characters. Should reference specific KRs and trade-offs made.",
              "minLength": 200,
              "maxLength": 2000,
              "examples": [
                "Sequencing prioritizes risk reduction: kr-p-001 (validate core value prop) before kr-p-003 (expand features) to avoid building wrong thing. kr-s-001 (define ICP) early to inform all subsequent product decisions. kr-o-001 (hire eng lead) gates product velocity increases. Commercial work (kr-c-001, kr-c-002) deferred until product-market fit validated to avoid premature scaling.",
                "Critical path driven by Series A timeline: kr-p-002 (platform stability) must complete by Q1 for enterprise sales readiness (kr-c-003). kr-s-001 (competitive positioning) informs pricing (kr-c-001) which must be finalized 4 weeks pre-launch. OrgOps work (kr-o-001, kr-o-002) runs in parallel to avoid team bottleneck."
              ]
            },
            "critical_path": {
              "type": "array",
              "description": "Ordered sequence of Key Result IDs that form the longest dependency chain. Delays on critical path delay entire roadmap. Format: 'track:kr-id' (e.g., 'product:kr-p-001'). Each KR in path should have clear predecessor (except first) and successor (except last). Used for: (1) Identifying highest-priority work, (2) Allocating best resources, (3) Monitoring for blocks. Typical length: 5-12 KRs for quarterly roadmap.",
              "items": {
                "type": "string",
                "pattern": "^(product|strategy|org_ops|commercial):kr-[psoc]-\\d{3}$",
                "examples": ["product:kr-p-001", "strategy:kr-s-002", "org_ops:kr-o-003", "commercial:kr-c-001"]
              },
              "minItems": 1,
              "maxItems": 20
            },
            "parallel_tracks": {
              "type": "array",
              "description": "Groups of Key Results that can be pursued simultaneously. Parallel tracks enable team scaling and velocity by identifying work without hard dependencies. Each track has: (1) Descriptive name, (2) List of KRs that can run concurrently, (3) Timeframe for completion, (4) Optional prerequisites (depends_on). Used for resource planning and team structure decisions.",
              "$comment": "PARALLEL TRACK PATTERNS: Parallel tracks represent opportunities for concurrent execution. They answer: What can we do at the same time? Common patterns: (1) Track-based parallelism (Product team works on features while Strategy team works on GTM), (2) Component-based parallelism (Frontend and backend work in parallel), (3) Learning-based parallelism (User research runs alongside prototyping), (4) Resource-based parallelism (Multiple teams work on different features). Parallel tracks require: (1) Sufficient team capacity, (2) Clear ownership (who owns each KR), (3) Coordination mechanisms (standups, sync points), (4) No hard dependencies between KRs in track. Benefits: Increased velocity (more work completes per unit time), Team autonomy (less coordination overhead), Risk diversification (failure in one track doesn't block others), Skill utilization (parallel work matches different skills). Anti-patterns: Fake parallelism (implicit dependencies between 'parallel' work), Over-parallelization (coordination overhead exceeds benefits), Under-resourced parallel tracks (spread team too thin), Missing sync points (tracks diverge without coordination).",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Human-readable name for this parallel track. Should describe the theme or focus area (e.g., 'Core Product Development', 'GTM Preparation', 'Team Building'). Length: 10-80 characters. Used in roadmap visualization and communication.",
                    "minLength": 10,
                    "maxLength": 80,
                    "examples": ["Core Product Development", "Go-to-Market Preparation", "Engineering Team Scaling", "Customer Success Foundation"]
                  },
                  "key_results": {
                    "type": "array",
                    "description": "List of Key Result IDs that can be pursued in parallel within this track. IDs can span multiple tracks (e.g., Product and Strategy work happening simultaneously). Each KR listed should be independent of others in THIS parallel track (though may depend on KRs in different parallel tracks via depends_on). Minimum 1 KR, maximum 10 per parallel track.",
                    "items": {
                      "type": "string",
                      "pattern": "^kr-[psoc]-\\d{3}$",
                      "examples": ["kr-p-001", "kr-p-002", "kr-s-001"]
                    },
                    "minItems": 1,
                    "maxItems": 10
                  },
                  "timeframe": {
                    "type": "string",
                    "description": "Expected timeframe for completing all KRs in this parallel track. Format: duration or date range (e.g., '6 weeks', 'January-February', 'Q1 2024'). Used for resource planning and milestone alignment. Should be realistic given team capacity. Length: 5-50 characters.",
                    "minLength": 5,
                    "maxLength": 50,
                    "examples": ["6 weeks", "Q1 2024", "January-March", "8-12 weeks", "First half of cycle"]
                  },
                  "depends_on": {
                    "type": "array",
                    "description": "Optional list of Key Result IDs that must complete before this parallel track can start. Represents inter-track dependencies. If omitted, track can start immediately. Use format: 'kr-{prefix}-{number}'. References KRs from other parallel tracks or critical path. Empty array means no prerequisites.",
                    "items": {
                      "type": "string",
                      "pattern": "^kr-[psoc]-\\d{3}$",
                      "examples": ["kr-p-001", "kr-s-002", "kr-o-001"]
                    }
                  }
                },
                "required": ["name", "key_results"]
              }
            },
            "key_milestones": {
              "type": "array",
              "description": "Significant decision points, launches, or events where multiple Key Results converge. Milestones answer: When do we need specific outcomes achieved? Used for: (1) Stakeholder communication (board meetings, investor updates), (2) Market timing (product launches, conference demos), (3) Internal coordination (team planning, resource allocation), (4) Progress tracking (are we on schedule?). Each milestone specifies date (or date range), description, and which KRs must be complete.",
              "$comment": "MILESTONE PATTERNS: Milestones are the 'hard dates' in the roadmap—points where external commitments, market timing, or strategic dependencies require specific KRs to be complete. Common milestone types: (1) Product launches (public release, beta, private launch), (2) Fundraising events (board meetings, investor demos, close dates), (3) Market events (conferences, partner demos, press releases), (4) Internal events (team offsite, planning cycles, fiscal periods), (5) Customer commitments (enterprise contracts, partnership launches). Milestones drive backward planning: if milestone is June 1 and requires kr-p-003, work backward to determine when kr-p-003 must start given dependencies and duration. Milestone management best practices: Buffer time (add 10-20% margin before milestone), Clear completion criteria (what does 'done' mean for each KR), Stakeholder alignment (everyone agrees on milestone definition), Risk management (identify risks to milestone achievement), Escalation process (how to handle milestone risks). Anti-patterns: Too many milestones (creates false urgency), Milestones without clear purpose (arbitrary dates), Unrealistic milestones (ignore dependencies and capacity), Missing milestone risks (no contingency planning). Typical roadmap has 3-8 major milestones per cycle—fewer than 3 suggests lack of external accountability, more than 10 suggests over-scheduling.",
              "items": {
                "type": "object",
                "properties": {
                  "date": {
                    "type": "string",
                    "description": "Target date or date range for the milestone. Format: ISO date (YYYY-MM-DD), month (YYYY-MM), or natural language (e.g., 'End of Q1 2024', 'Mid-March'). Precision varies by horizon: near-term milestones use specific dates, far-term use broader ranges. Length: 8-50 characters.",
                    "minLength": 8,
                    "maxLength": 50,
                    "examples": ["2024-03-15", "2024-04", "End of Q1 2024", "Mid-June", "Week of March 25"]
                  },
                  "milestone": {
                    "type": "string",
                    "description": "Human-readable description of what the milestone represents. Include: (1) Event type (launch, demo, meeting), (2) Audience (customers, investors, internal), (3) Success criteria. Length: 20-200 characters. Examples: 'MVP Launch to First 100 Users', 'Series A Pitch at Board Meeting', 'Conference Demo at TechCrunch Disrupt'.",
                    "minLength": 20,
                    "maxLength": 200,
                    "examples": [
                      "MVP Launch to First 100 Customers",
                      "Series A Board Meeting Presentation",
                      "Product Demo at Industry Conference",
                      "Enterprise Customer Pilot Begins",
                      "Team Offsite for Q2 Planning"
                    ]
                  },
                  "key_results": {
                    "type": "array",
                    "description": "List of Key Result IDs that must be completed (or substantially complete) by this milestone. Defines the scope of work required for milestone success. Each KR should contribute to milestone achievement. Format: 'kr-{prefix}-{number}'. Minimum 1 KR (focused milestone), maximum 10 KRs (coordinated milestone). If milestone depends on partial KR completion, note in milestone description.",
                    "items": {
                      "type": "string",
                      "pattern": "^kr-[psoc]-\\d{3}$",
                      "examples": ["kr-p-001", "kr-p-002", "kr-s-001", "kr-c-001"]
                    },
                    "minItems": 1,
                    "maxItems": 10
                  }
                },
                "required": ["milestone", "key_results"]
              }
            }
          },
          "required": ["sequencing_rationale", "critical_path"]
        },
        "status": {
          "type": "string",
          "enum": ["draft", "approved", "active", "completed", "cancelled"],
          "description": "Current lifecycle status of the roadmap. Status transitions: draft (planning) → approved (stakeholder alignment) → active (execution) → completed/cancelled (closure). Status determines: (1) Who can modify roadmap, (2) Whether execution is authorized, (3) Reporting and visibility. Changes to active roadmaps require approval process. Cancelled roadmaps document why cancellation occurred."
        },
        "approved_by": {
          "type": ["string", "null"],
          "description": "Name or ID of person/body who approved the roadmap for execution. Null while status is 'draft'. Typically executive, board, or steering committee. Used for accountability and audit trail. Format: free text name or user ID (e.g., 'Jane Smith, CEO', 'user-123'). Length: 3-100 characters when populated.",
          "minLength": 3,
          "maxLength": 100,
          "examples": ["Jane Smith, CEO", "Product Council", "Board of Directors", "user-executive-123", null]
        },
        "approval_date": {
          "type": ["string", "null"],
          "description": "ISO 8601 date when roadmap was approved for execution. Null while status is 'draft'. Marks transition from planning to commitment. Format: YYYY-MM-DD. Used for timeline tracking and version history. Should match or precede start_date.",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "examples": ["2024-01-15", "2024-03-01", null]
        },
        "start_date": {
          "type": ["string", "null"],
          "description": "ISO 8601 date when roadmap execution begins. Null while status is 'draft'. Marks when teams start working on Key Results. Format: YYYY-MM-DD. Should be on or after approval_date. Used for timeline calculations and progress tracking.",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "examples": ["2024-01-20", "2024-04-01", null]
        },
        "target_completion_date": {
          "type": ["string", "null"],
          "description": "ISO 8601 date when all Key Results should be achieved. Null during early planning. Represents commitment to stakeholders and customers. Format: YYYY-MM-DD. Drives backward planning from milestones. Should align with cycle duration (e.g., 90 days for quarterly roadmap). Actual completion may differ—this is the target.",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "examples": ["2024-03-31", "2024-06-30", "2024-12-31", null]
        }
      },
      "required": ["id", "strategy_id", "cycle", "timeframe", "tracks", "execution_plan", "status"]
    }
  },
  "required": ["roadmap"],
  "definitions": {
    "track": {
      "type": "object",
      "description": "A single execution track (Product, Strategy, OrgOps, or Commercial) with its own OKRs, assumptions, and solution scaffold. Tracks represent semi-independent organizational functions that coordinate through cross-track dependencies. Each track defines WHAT outcomes to achieve (OKRs), WHAT needs validation (riskiest assumptions), and HOW solutions will be structured (solution scaffold). Tracks stop at Key Result level—detailed work breakdown happens in spec-driven tools.",
      "$comment": "TRACK STRUCTURE: Each track is a complete mini-roadmap with three components: (1) OKRs (Objectives and Key Results) define measurable outcomes, (2) Riskiest Assumptions identify validation needs, (3) Solution Scaffold provides architectural context. Track design principles: (1) Outcome-focused (KRs measure impact, not output), (2) Measurable (clear success criteria), (3) Time-bound (achievable within cycle), (4) Coordinated (dependencies made explicit), (5) Validated (assumptions tested first). Track lifecycle: Define track objective → Identify Key Results → Document assumptions → Sketch solution scaffold → Sequence work → Execute → Measure outcomes. Tracks are reviewed regularly (weekly/biweekly) during execution to track KR progress, validate assumptions, adjust plans. Track ownership: Each track typically has an executive owner (Product: CPO/Head of Product, Strategy: CEO/COO, OrgOps: COO/Head of People, Commercial: CRO/CFO) who is accountable for outcome achievement. Track balance varies by organization stage: early-stage (60% Product, 20% Strategy, 10% OrgOps, 10% Commercial), growth-stage (40% Product, 20% Strategy, 20% OrgOps, 20% Commercial), mature (25% each). These are guidelines—actual balance depends on context.",
      "properties": {
        "track_objective": {
          "type": "string",
          "description": "High-level aspirational objective for this track over the roadmap timeframe. Answers: What is this track trying to achieve overall? Should be qualitative, ambitious, and aligned with strategy. Not directly measurable (that's what Key Results do). Examples: Product track ('Deliver industry-leading user experience'), Strategy track ('Establish market leadership in healthcare vertical'), OrgOps track ('Build world-class engineering culture'), Commercial track ('Achieve sustainable unit economics'). Length: 30-200 characters.",
          "minLength": 30,
          "maxLength": 200,
          "examples": [
            "Deliver an industry-leading user experience that drives organic growth",
            "Establish market leadership in the healthcare vertical",
            "Build a world-class engineering culture that attracts top talent",
            "Achieve sustainable unit economics and positive contribution margin"
          ]
        },
        "okrs": {
          "type": "array",
          "description": "Array of Objectives and Key Results (OKRs) for this track. Each OKR contains one Objective (qualitative goal) and multiple Key Results (measurable outcomes). OKRs are the primary mechanism for defining and tracking progress. Minimum 1 OKR per track (focused), maximum 5 OKRs per track (avoid over-commitment). Total Key Results across all track OKRs should be 3-15 for a quarterly roadmap.",
          "$comment": "OKR METHODOLOGY: OKRs separate aspirational goals (Objectives) from measurable outcomes (Key Results). An Objective answers 'What do we want to achieve?' (qualitative, inspirational, directional). Key Results answer 'How will we know we achieved it?' (quantitative, specific, measurable). Classic OKR structure: 1 Objective → 3-5 Key Results. OKR best practices: (1) Objectives are ambitious (stretch goals), (2) Key Results are measurable (numbers, not opinions), (3) Key Results are outcome-focused (impact, not output), (4) Achievement is 60-70% (not 100%), (5) Regular check-ins (weekly/biweekly progress review). OKR anti-patterns: Objectives that are tasks (not goals), Key Results that are outputs (shipped features), Sandbagging (setting easy targets), Too many OKRs (dilutes focus), No measurement plan (can't track progress). OKR lifecycle: Set at cycle start → Review progress regularly → Score at cycle end → Learn and adjust for next cycle. Scoring: 0-0.3 (red, need help), 0.4-0.6 (yellow, making progress), 0.7-1.0 (green, on track/exceeded).",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "pattern": "^okr-[psoc]-\\d{3}$",
                "description": "Unique OKR identifier with track prefix and zero-padded number. Format: 'okr-{track}-{number}' where track is p (product), s (strategy), o (org_ops), or c (commercial). Number is 001-999, zero-padded. Examples: 'okr-p-001' (first product OKR), 'okr-s-002' (second strategy OKR). IDs must be unique within track and immutable (don't reuse IDs).",
                "examples": ["okr-p-001", "okr-s-001", "okr-o-001", "okr-c-001", "okr-p-002"]
              },
              "objective": {
                "type": "string",
                "description": "Qualitative, aspirational goal statement. Answers: What does success look like for this area? Should be ambitious, inspirational, and aligned with track objective. Not directly measurable (Key Results provide measurement). Voice should be active and outcome-oriented. Length: 30-200 characters. Examples: 'Launch an MVP that proves core value proposition', 'Establish thought leadership in target market', 'Build a high-performing engineering organization', 'Achieve predictable revenue growth'.",
                "minLength": 30,
                "maxLength": 200,
                "examples": [
                  "Launch an MVP that proves our core value proposition to early adopters",
                  "Establish thought leadership and credibility in the healthcare compliance market",
                  "Build a high-performing engineering organization that ships with quality and velocity",
                  "Achieve predictable, sustainable revenue growth with healthy unit economics"
                ]
              },
              "key_results": {
                "type": "array",
                "description": "Array of measurable outcomes that indicate Objective achievement. Each Key Result must be: (1) Quantifiable (has a number), (2) Measurable (can track progress), (3) Time-bound (achievable within cycle), (4) Outcome-focused (measures impact, not activity). Minimum 2 Key Results per Objective (provides balanced measurement), maximum 5 Key Results per Objective (avoids dilution). Total KRs per track should be 3-15 for quarterly roadmap.",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string",
                      "pattern": "^kr-[psoc]-\\d{3}$",
                      "description": "Unique Key Result identifier with track prefix. Format: 'kr-{track}-{number}' with zero-padded number 001-999. Must be globally unique within roadmap (used in cross-track dependencies, execution plan, milestones). Never reuse IDs even after roadmap completion (maintains referential integrity). Examples: 'kr-p-001', 'kr-s-002', 'kr-o-003', 'kr-c-004'.",
                      "examples": ["kr-p-001", "kr-s-001", "kr-o-001", "kr-c-001", "kr-p-010"]
                    },
                    "description": {
                      "type": "string",
                      "description": "Complete description of what this Key Result measures and why it matters. Should include: (1) Metric being measured, (2) Target value, (3) Why this metric was chosen, (4) How it connects to Objective. Length: 50-400 characters. Example: 'Achieve 1000 active users (DAU) demonstrating product-market fit and validating core value proposition. Baseline: 0 users. Measured via analytics dashboard.'",
                      "minLength": 50,
                      "maxLength": 400,
                      "examples": [
                        "Achieve 1000 daily active users (DAU) demonstrating product-market fit and validating our core value proposition",
                        "Increase feature usage rate from 20% to 60% showing that users find significant value in the platform",
                        "Reduce customer acquisition cost (CAC) from $500 to $200 through improved conversion funnel",
                        "Hire and onboard 5 senior engineers to scale team capacity and enable parallel development workstreams"
                      ]
                    },
                    "target": {
                      "type": "string",
                      "description": "Specific, measurable target for this Key Result. Format varies by metric type: (1) Absolute number ('1000 DAU', '5 engineers hired'), (2) Percentage ('60% feature adoption', '25% conversion rate'), (3) Ratio ('$200 CAC', '3:1 LTV:CAC'), (4) Completion ('5 of 5 integrations launched'). Target should be ambitious but achievable (60-70% confidence). Length: 5-100 characters.",
                      "minLength": 5,
                      "maxLength": 100,
                      "examples": ["1000 DAU", "60% adoption rate", "$200 CAC", "5 engineers hired", "95% uptime", "3:1 LTV:CAC ratio"]
                    },
                    "measurement_method": {
                      "type": "string",
                      "description": "Optional description of HOW this Key Result will be measured and tracked. Includes: (1) Data source (analytics tool, manual tracking, survey), (2) Measurement frequency (daily, weekly, monthly), (3) Calculation method (formula if non-obvious), (4) Who is responsible for tracking. Length: 30-300 characters when provided. Example: 'Tracked daily via Mixpanel analytics dashboard. Metric = unique users with ≥1 session in last 24h. Product team reviews weekly.'",
                      "minLength": 30,
                      "maxLength": 300,
                      "examples": [
                        "Tracked daily via Mixpanel analytics. Metric = unique users with ≥1 active session in last 24h. PM reviews progress weekly.",
                        "Calculated monthly via Stripe MRR report. Target = $50K MRR with ≥30% month-over-month growth. CFO tracks.",
                        "Measured via quarterly NPS survey sent to all users. Target = NPS ≥40 (promoters - detractors). CS team owns."
                      ]
                    },
                    "baseline": {
                      "type": "string",
                      "description": "Optional starting point for this metric at cycle begin. Provides context for target ambition and enables progress calculation (% of distance covered). Format matches target format. If baseline is 0 or N/A (new metric), explicitly state. Length: 3-100 characters when provided. Examples: '0 users' (new product), '200 DAU' (existing metric), 'N/A' (qualitative baseline), '15% adoption' (improvement target).",
                      "minLength": 3,
                      "maxLength": 100,
                      "examples": ["0 users", "200 DAU", "15% adoption", "$500 CAC", "N/A", "2 engineers", "70% uptime"]
                    },
                    "trl_start": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 9,
                      "description": "OPTIONAL: Technology Readiness Level where work begins (current maturity). Tracks learning and innovation maturity progression—strategic WHY/HOW focus, not execution WHAT. Uses NASA TRL scale 1-9: TRL 1 (basic research), TRL 2-3 (concept/experimental POC), TRL 4-6 (validation/demonstration), TRL 7 (prototype operational), TRL 8-9 (production/proven). Applies to ALL tracks: Product (technical maturity), Strategy (market positioning maturity), OrgOps (process maturity), Commercial (business model maturity). TRL 1-6 indicates learning/experimentation phase, TRL 7-9 indicates execution of proven approaches. Omit for routine execution work. See docs/guides/UNIVERSAL_TRL_FRAMEWORK.md for track-specific interpretations.",
                      "examples": [2, 3, 4, 5, 6, 7, 8]
                    },
                    "trl_target": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 9,
                      "description": "OPTIONAL: Technology Readiness Level to be achieved after completing this KR. Must be ≥ trl_start (can't go backwards). Represents desired maturity advancement through learning and experimentation. Common progressions: TRL 2→3 (concept to POC), TRL 3→5 (POC to validation), TRL 4→6 (lab to demonstration), TRL 5→7 (validation to operational prototype), TRL 7→9 (prototype to production). Multi-level jumps (e.g., TRL 2→6) are possible but should be justified—single KR achieving >3 TRL levels may indicate need for decomposition. Omit for routine execution work.",
                      "examples": [3, 4, 5, 6, 7, 8, 9]
                    },
                    "trl_progression": {
                      "type": "string",
                      "pattern": "^TRL [1-9] → TRL [1-9]$",
                      "description": "OPTIONAL: Human-readable summary of TRL advancement for innovation maturity tracking. Format: 'TRL X → TRL Y' where X = trl_start, Y = trl_target. Must be consistent with trl_start and trl_target values. Provides at-a-glance view of maturity advancement. Examples: 'TRL 2 → TRL 3' (concept to proof), 'TRL 3 → TRL 5' (proof to validation), 'TRL 7 → TRL 9' (prototype to production). This field enables quick filtering and reporting on innovation vs execution KRs. Omit for routine execution work.",
                      "examples": ["TRL 2 → TRL 3", "TRL 3 → TRL 5", "TRL 4 → TRL 6", "TRL 5 → TRL 7", "TRL 7 → TRL 9"]
                    },
                    "technical_hypothesis": {
                      "type": "string",
                      "description": "OPTIONAL (required for R&D funding applications): Statement of what you believe will work and why. Format: 'We believe [approach] will [outcome] because [reasoning]'. For innovation KRs (TRL 1-6), this captures the uncertainty being addressed. For execution KRs (TRL 7-9), may be omitted (using proven methods). Product track: technical approach hypothesis. Strategy track: market/positioning hypothesis. OrgOps track: process improvement hypothesis. Commercial track: business model hypothesis. Length: 50-500 characters.",
                      "minLength": 50,
                      "maxLength": 500,
                      "examples": [
                        "Fine-tuned embedding models will outperform general-purpose models by 20%+ precision on technical documentation because domain-specific training captures specialized terminology and concepts",
                        "Developer-first positioning will generate 2x more qualified leads than enterprise-first because developers are primary product users and drive bottom-up adoption",
                        "Async-first sprint planning will improve distributed team efficiency by 30% because it eliminates timezone constraints and enables thoughtful contribution"
                      ]
                    },
                    "experiment_design": {
                      "type": "string",
                      "description": "OPTIONAL (required for R&D funding): Description of how hypothesis will be tested. Includes: (1) What will be built/tested, (2) What data will be collected, (3) How long experiment will run, (4) Success/failure criteria. For innovation KRs (TRL 1-6), this is critical for validating advancement. For execution KRs (TRL 7-9), may describe rollout approach. Should be specific enough to reproduce. Length: 100-600 characters.",
                      "minLength": 100,
                      "maxLength": 600,
                      "examples": [
                        "Benchmark 5 embedding models (OpenAI, Cohere, E5-large, BGE-M3, SentenceTransformers) on 1000+ technical Q&A pairs collected from documentation sites. Measure precision@k, recall@k, and F1 score. Run for 4 weeks with weekly result reviews. Success: ≥1 model achieves 85%+ precision@10.",
                        "A/B test two landing page variants (developer-focused vs enterprise-focused) with $5k ad spend to each. Track click-through rate, sign-up conversion, and meeting booking rate over 30 days. Minimum 1000 visitors per variant for statistical significance."
                      ]
                    },
                    "success_criteria": {
                      "type": "string",
                      "description": "OPTIONAL (required for R&D funding): Explicit definition of what proves hypothesis correct and justifies TRL advancement. Should be measurable and unambiguous. For innovation KRs, defines evidence required to progress to next TRL. For execution KRs, defines operational readiness. Often more detailed than the 'target' field. Length: 30-400 characters.",
                      "minLength": 30,
                      "maxLength": 400,
                      "examples": [
                        "At least one embedding model achieves ≥85% precision@10 on held-out test set of 200+ technical queries. Model must maintain performance across 3+ documentation domains (API refs, architecture docs, troubleshooting guides).",
                        "Developer positioning generates ≥100 marketing-qualified leads with 40%+ meeting booking rate, 2x better than enterprise positioning control group.",
                        "All 5 product teams adopt async sprint planning process, average planning time reduces by 30%, team satisfaction scores ≥4.5/5.0, velocity variance <5%."
                      ]
                    },
                    "uncertainty_addressed": {
                      "type": "string",
                      "description": "OPTIONAL (required for R&D funding): Description of what technical, market, process, or business model uncertainty this KR resolves. Explicitly states the risk being mitigated or knowledge gap being filled. Critical for innovation funding applications (demonstrates R&D nature). For execution KRs (TRL 7-9), may describe operational risks instead. Length: 50-400 characters.",
                      "minLength": 50,
                      "maxLength": 400,
                      "examples": [
                        "Whether semantic search is accurate enough for technical domains where precision is critical (vs general consumer search where 60-70% precision is acceptable). Risk: building on insufficient technology leads to poor UX and churn.",
                        "Which market segment (developers vs enterprises) has stronger product-market fit and will drive sustainable growth. Risk: targeting wrong segment wastes GTM resources and delays PMF.",
                        "Whether distributed teams can maintain velocity and alignment using async processes (vs traditional synchronous planning). Risk: reduced cohesion and coordination overhead offset efficiency gains."
                      ]
                    }
                  },
                  "required": ["id", "description", "target"]
                },
                "minItems": 2,
                "maxItems": 5
              }
            },
            "required": ["id", "objective", "key_results"]
          },
          "minItems": 1,
          "maxItems": 5
        },
        "riskiest_assumptions": {
          "type": "array",
          "description": "Array of assumptions that, if wrong, would cause Key Results to fail or strategy to be invalidated. Captures uncertainty that needs validation before significant investment. Each assumption has: type (what kind of risk), criticality (impact if wrong), confidence (how certain we are), evidence needed (what would validate it). Minimum 2 assumptions per track (every plan has risk), maximum 10 assumptions per track (avoid analysis paralysis). Focus on HIGH criticality + LOW confidence assumptions first.",
          "$comment": "ASSUMPTION VALIDATION: Riskiest assumptions are the 'what could go wrong?' part of planning. They identify uncertainty and enable risk-based sequencing: validate riskiest assumptions first before building. Four assumption types (from Lean Startup): (1) Desirability = Do customers want this? (user research, interviews, surveys), (2) Feasibility = Can we build this? (technical spikes, prototypes, proof-of-concepts), (3) Viability = Can we sustain this? (financial modeling, unit economics, pricing tests), (4) Adaptability = Can we respond to change? (organizational capacity, process flexibility, culture assessment). Criticality measures impact if assumption is wrong: HIGH = invalidates entire approach, MEDIUM = requires significant pivot, LOW = tactical adjustment. Confidence measures current certainty: LOW = pure speculation, MEDIUM = some evidence, HIGH = validated hypothesis. Risk matrix guides prioritization: HIGH criticality + LOW confidence = validate immediately (highest risk), HIGH criticality + HIGH confidence = monitor (key assumption, low risk), LOW criticality + LOW confidence = defer (nice-to-know). Evidence types: Qualitative (interviews, usability tests), Quantitative (surveys, A/B tests, analytics), Behavioral (usage data, purchase data), Technical (spikes, prototypes, load tests). Assumptions link to Key Results (shows what's at risk if assumption is wrong). Assumption lifecycle: Document → Validate (run experiments) → Update confidence → Make go/no-go decision. Assumptions should be reviewed at every milestone—as confidence increases, risk decreases. Anti-patterns: Assumptions that are really requirements (not testable), Assumptions that are too detailed (should be high-level risks), Missing the ACTUAL riskiest assumption (fatal blind spot), No plan to validate assumptions (just documenting risk without action).",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "pattern": "^asm-[psoc]-\\d{3}$",
                "description": "Unique assumption identifier with track prefix. Format: 'asm-{track}-{number}' where track is p/s/o/c and number is 001-999 zero-padded. Examples: 'asm-p-001' (product assumption), 'asm-s-002' (strategy assumption). Used for tracking validation progress and linking to Key Results. IDs are immutable (don't reuse even after validation).",
                "examples": ["asm-p-001", "asm-s-001", "asm-o-001", "asm-c-001", "asm-p-002"]
              },
              "description": {
                "type": "string",
                "description": "Clear statement of the assumption being made. Format as testable hypothesis: 'We assume that [condition] will [result]' or 'We believe [target audience] will [behavior] because [reason]'. Should be specific enough to validate but broad enough to be strategic. Length: 50-500 characters. Example: 'We assume healthcare providers will pay $50/month for HIPAA-compliant collaboration because manual compliance workflows cost them $500/month in labor.'",
                "minLength": 50,
                "maxLength": 500,
                "examples": [
                  "We assume healthcare providers will pay $50/month for HIPAA-compliant collaboration because manual compliance costs them $500/month in staff time",
                  "We believe we can build real-time collaboration features with our current tech stack without major architectural changes",
                  "We assume our target market will grow 30% year-over-year based on regulatory trends and industry reports",
                  "We believe we can hire 5 senior engineers in Q1 despite competitive talent market because of our strong employer brand"
                ]
              },
              "type": {
                "type": "string",
                "enum": ["desirability", "feasibility", "viability", "adaptability"],
                "description": "Category of assumption that determines validation approach. 'desirability' = Customer want/need (validate via user research, interviews, surveys, usability tests). 'feasibility' = Technical capability (validate via spikes, prototypes, architecture reviews). 'viability' = Business sustainability (validate via financial modeling, pricing tests, unit economics). 'adaptability' = Organizational capacity (validate via team assessment, process review, culture survey)."
              },
              "criticality": {
                "type": "string",
                "enum": ["high", "medium", "low"],
                "description": "Impact if assumption proves wrong. 'high' = Invalidates entire approach, requires fundamental pivot or cancellation (e.g., customers won't pay, technology doesn't work at scale). 'medium' = Requires significant adjustment to plan, delays milestones (e.g., need different pricing model, technical debt paydown required). 'low' = Tactical adjustment without major impact (e.g., feature adoption lower than hoped, hiring takes longer). Drives prioritization: validate high-criticality assumptions first."
              },
              "confidence": {
                "type": "string",
                "enum": ["low", "medium", "high"],
                "description": "Current level of certainty in this assumption based on existing evidence. 'low' = Pure speculation, hypothesis untested (0-30% confidence). 'medium' = Some supporting evidence but not validated (40-60% confidence). 'high' = Strong evidence from previous validation (70-100% confidence). Combined with criticality: HIGH criticality + LOW confidence = highest risk (validate immediately). Confidence increases as evidence is gathered."
              },
              "evidence_required": {
                "type": "string",
                "description": "Description of what evidence or validation would increase confidence in this assumption. Be specific about: (1) Type of evidence (interviews, survey data, technical spike, financial model), (2) Success criteria (how many users, what metrics, what results), (3) Timeline (when to validate), (4) Who is responsible. Length: 50-500 characters. Example: '10 customer interviews with target personas by end of month. Success = 8/10 express willingness to pay $50/month. PM team owns.'",
                "minLength": 50,
                "maxLength": 500,
                "examples": [
                  "10 customer discovery interviews with healthcare IT directors. Success = 8/10 confirm $500/month pain point and interest in $50/month solution. PM team completes by end of month.",
                  "Technical spike to validate WebRTC can handle 50 concurrent users. Success = <100ms latency, <1% packet loss. Engineering completes in 2 weeks.",
                  "Financial model with 3-year projections. Success = path to profitability within 18 months at assumed CAC and LTV. CFO completes this quarter.",
                  "3 senior engineer offers accepted within 60 days. Success = 60% offer acceptance rate. Recruiting team tracks weekly."
                ]
              },
              "linked_to_kr": {
                "type": "array",
                "description": "Array of Key Result IDs that depend on this assumption being valid. Shows which outcomes are at risk if assumption is wrong. Format: 'kr-{track}-{number}'. Can link to KRs in same track or across tracks. If assumption invalidated, linked KRs may need to be revised or cancelled. Empty array means assumption is general (not tied to specific KRs).",
                "items": {
                  "type": "string",
                  "pattern": "^kr-[psoc]-\\d{3}$",
                  "examples": ["kr-p-001", "kr-p-002", "kr-s-001", "kr-c-001"]
                }
              }
            },
            "required": ["id", "description", "type", "criticality", "confidence"]
          },
          "minItems": 2,
          "maxItems": 10
        },
        "solution_scaffold": {
          "type": "object",
          "description": "High-level architecture sketch showing HOW Key Results will be achieved. NOT detailed implementation (that's for spec-driven tools)—just enough structure to ensure technical coherence and enable scope estimation. Includes: (1) Description of overall approach, (2) Key components that will be built/acquired, (3) Architecture principles that guide decisions, (4) Technical constraints that must be respected. Solution scaffold answers: What are we building? How do pieces fit together? What are our guardrails?",
          "$comment": "SOLUTION SCAFFOLD PURPOSE: The scaffold bridges strategy (Key Results) and implementation (detailed specs). It operates at component level—defining WHAT major pieces exist and HOW they relate, not implementation details. Scaffold serves four purposes: (1) Technical coherence (ensures pieces fit together), (2) Scope alignment (Reality-checks if KRs are achievable), (3) Dependency identification (surfaces technical prerequisites), (4) Team communication (engineers understand direction). Scaffold is NOT: Detailed architecture (too early), Implementation plan (that's for specs), Technology selection (that's for RFCs). Scaffold IS: Component inventory (what major pieces), Integration points (how components relate), Architecture principles (guide decisions), Technical constraints (what we must respect). Scaffold should map to value models (shows how technical components deliver value model layers). Components are prioritized (must-have, should-have, could-have) to enable MVP/phasing. Architecture principles are guardrails (e.g., 'Prefer managed services over custom infrastructure', 'API-first design', 'Progressive enhancement'). Technical constraints are non-negotiable (e.g., 'HIPAA compliance required', 'Support IE11', 'Max 500ms API latency'). Scaffold evolves during execution as learning occurs—updated via RFCs and architecture decision records (ADRs). Anti-patterns: Scaffold that is too detailed (becomes outdated), Scaffold that ignores constraints (unrealistic), No link to value models (technical work disconnected from value), Components without clear purpose (scope creep), Missing architecture principles (inconsistent decisions).",
          "properties": {
            "description": {
              "type": "string",
              "description": "Narrative description of the overall solution approach and how components work together to achieve Key Results. Answers: What's the big picture? What are we building? How does it deliver value? Should reference specific Key Results and value model mappings. Include major technology choices (e.g., 'React SPA frontend, Node.js API backend, PostgreSQL database'). Length: 200-2000 characters. Example: 'Build HIPAA-compliant collaboration platform (kr-p-001) with React frontend, Node.js/Express API, PostgreSQL database. Key components: Auth system (PRODUCT-L2-auth), Real-time messaging (PRODUCT-L2-collab), Document management (PRODUCT-L2-docs). Architecture follows API-first design, microservices where needed, managed cloud services (AWS). Constraints: HIPAA compliance (encryption at rest/transit, audit logs), 99.9% uptime SLA.'",
              "minLength": 200,
              "maxLength": 2000,
              "examples": [
                "Build a HIPAA-compliant team collaboration platform with real-time messaging, document sharing, and audit trails. Frontend: React SPA with TypeScript. Backend: Node.js/Express API with PostgreSQL database. Key technical components: Authentication system (maps to PRODUCT-L2-auth), Real-time collaboration engine (PRODUCT-L2-collab), Document management (PRODUCT-L2-docs), Compliance framework (PRODUCT-L2-security). Architecture follows API-first design with clear separation between presentation and business logic. Will leverage managed services (AWS) for scalability and compliance. Critical constraints: HIPAA compliance required (encryption at rest/transit, comprehensive audit logs), 99.9% uptime SLA, support for 1000 concurrent users."
              ]
            },
            "key_components": {
              "type": "array",
              "description": "List of major technical components that will be built or acquired to deliver Key Results. Components represent significant pieces of functionality (not individual features). Each component has: unique ID, name, purpose (why it exists), priority (must/should/could have), mapping to value model (shows how it delivers value). Minimum 3 components (some structure required), maximum 15 components per track (avoid overwhelming detail). Focus on must-have components first.",
              "items": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "pattern": "^comp-[psoc]-\\d{3}$",
                    "description": "Unique component identifier with track prefix. Format: 'comp-{track}-{number}' where track is p/s/o/c and number is 001-999 zero-padded. Examples: 'comp-p-001' (product component), 'comp-s-001' (strategy component). Used for tracking implementation and referencing in specs. IDs are immutable.",
                    "examples": ["comp-p-001", "comp-s-001", "comp-o-001", "comp-c-001", "comp-p-002"]
                  },
                  "name": {
                    "type": "string",
                    "description": "Human-readable name for the component. Should be clear, concise, and descriptive (not code/system names). Use domain language (what it does for users, not how it works technically). Length: 10-80 characters. Examples: 'User Authentication System', 'Real-time Collaboration Engine', 'Document Storage & Retrieval', 'Compliance Audit Framework'.",
                    "minLength": 10,
                    "maxLength": 80,
                    "examples": [
                      "User Authentication System",
                      "Real-time Collaboration Engine",
                      "Document Storage and Retrieval",
                      "Compliance Audit Framework",
                      "Analytics and Reporting Dashboard"
                    ]
                  },
                  "purpose": {
                    "type": "string",
                    "description": "Explanation of why this component exists and what value it delivers. Answers: What problem does it solve? Which Key Results does it support? How does it fit in overall solution? Should reference specific KRs if applicable. Length: 50-400 characters. Example: 'Enables secure user login and session management (supports kr-p-001: 1000 active users). Handles authentication, authorization, password management. Critical for HIPAA compliance requirements.'",
                    "minLength": 50,
                    "maxLength": 400,
                    "examples": [
                      "Enables secure user login, session management, and role-based access control. Supports kr-p-001 (1000 active users) by providing scalable authentication. Critical for HIPAA compliance requirements (encryption, audit logs).",
                      "Provides real-time messaging, presence awareness, and collaborative editing. Core functionality for kr-p-002 (60% feature engagement). Uses WebSocket connections for low-latency interactions.",
                      "Manages document upload, storage, versioning, and retrieval. Supports kr-p-003 (document collaboration). Integrates with compliance framework for encryption and audit trails."
                    ]
                  },
                  "priority": {
                    "type": "string",
                    "enum": ["must-have", "should-have", "could-have"],
                    "description": "MoSCoW priority indicating when component must be delivered. 'must-have' = Required for MVP, blocks Key Results if missing (deliver first). 'should-have' = Important but not blocking, can be deferred one cycle (deliver second). 'could-have' = Nice-to-have enhancement, can be deferred multiple cycles (deliver if time/resources allow). Prioritization drives phasing and resource allocation. Typical MVP: 60% must-have, 30% should-have, 10% could-have."
                  },
                  "maps_to_value_model": {
                    "type": "string",
                    "description": "Optional reference to corresponding component in value model structure. Format: '{LAYER}-L{level}-{id}' (e.g., 'PRODUCT-L2-auth', 'STRATEGY-L2-gtm'). Shows how technical component delivers value model promise. Enables traceability from strategy → roadmap → implementation. If no direct mapping (supporting infrastructure), note 'INFRASTRUCTURE' or omit. Length: 5-100 characters.",
                    "minLength": 5,
                    "maxLength": 100,
                    "examples": ["PRODUCT-L2-auth", "PRODUCT-L2-collaboration", "STRATEGY-L2-partnerships", "COMMERCIAL-L2-pricing", "INFRASTRUCTURE"]
                  }
                },
                "required": ["id", "name", "purpose", "priority"]
              },
              "minItems": 3,
              "maxItems": 15
            },
            "architecture_principles": {
              "type": "array",
              "description": "Guiding principles that inform architectural decisions throughout implementation. Principles are guardrails—they constrain choices to ensure consistency, quality, and alignment with strategy. Each principle is a concise statement of belief or rule. Common categories: Technology choices (prefer managed services), Design patterns (API-first, microservices), Quality attributes (security, performance, scalability), Process (documentation, testing, code review). Minimum 3 principles (some guidance required), maximum 10 principles (avoid overwhelming). Review principles when making significant technical decisions.",
              "items": {
                "type": "string",
                "minLength": 20,
                "maxLength": 200,
                "examples": [
                  "API-first design: All features exposed via REST/GraphQL API before UI implementation to enable flexibility and integrations",
                  "Prefer managed services over custom infrastructure: Use AWS managed services (RDS, S3, CloudFront) to reduce operational burden and accelerate delivery",
                  "Progressive enhancement: Build core functionality for broad browser support, enhance experience for modern browsers",
                  "Security by design: Encrypt all data at rest and in transit, implement comprehensive audit logging, follow OWASP Top 10 mitigations",
                  "Horizontal scalability: Design stateless services that can scale horizontally to meet demand without vertical scaling constraints"
                ]
              },
              "minItems": 3,
              "maxItems": 10
            },
            "technical_constraints": {
              "type": "array",
              "description": "Non-negotiable technical requirements that solution must satisfy. Constraints are must-haves—violating them blocks delivery. Common categories: Compliance (HIPAA, GDPR, SOC2), Performance (latency, throughput), Compatibility (browsers, devices, integrations), Infrastructure (cloud provider, regions), Security (encryption, authentication). Each constraint should be specific and testable. Minimum 2 constraints (some boundaries required), maximum 10 constraints (avoid over-constraining). Constraints inform testing and acceptance criteria.",
              "items": {
                "type": "string",
                "minLength": 30,
                "maxLength": 300,
                "examples": [
                  "HIPAA compliance required: All PHI must be encrypted at rest (AES-256) and in transit (TLS 1.2+), comprehensive audit logs for all data access, BAA with all vendors",
                  "99.9% uptime SLA: System must be available 99.9% of time (max 43 minutes downtime per month), requires redundancy and failover mechanisms",
                  "API response time <500ms: All API endpoints must respond within 500ms at p95 under normal load to ensure responsive user experience",
                  "Support 1000 concurrent users: System must handle 1000 simultaneously active users without degradation, requires load testing and performance optimization",
                  "Browser compatibility: Support latest 2 versions of Chrome, Firefox, Safari, Edge; IE11 not required"
                ]
              },
              "minItems": 2,
              "maxItems": 10
            }
          },
          "required": ["description", "key_components"]
        }
      },
      "required": ["track_objective", "okrs", "riskiest_assumptions", "solution_scaffold"]
    }
  }
}
