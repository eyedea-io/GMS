# AIM Trigger Configuration
# This file defines when to run AIM (Assessment & Calibration) sessions
# Philosophy: Treat AIM as investment decision—run when ROI justifies cost, not just on calendar

metadata:
  version: "2.0.0"                    # EPF version
  product_name: "YourProduct"         # Replace with your product name
  last_updated: "2025-12-29"          # YYYY-MM-DD format
  owner: "product-team@example.com"   # Product leader responsible for triggers

# Adoption level determines trigger sophistication
# 0: Solo founder (manual only)
# 1: Small team (manual + lightweight triggers)
# 2: Growing startup (weekly monitoring + ROI thresholds)
# 3: Product org (automated probes + cross-team coordination)
adoption_level: 1  # Start here, escalate as team grows

# Baseline: Scheduled AIM every 90 days (quarterly)
calendar_trigger:
  enabled: true
  cadence_days: 90                    # Quarterly (standard)
  next_scheduled: "2025-03-31"        # Next scheduled AIM date

# Dynamic triggers based on data, not calendar
value_driven_triggers:

  # Trigger 1: ROI Threshold (run AIM when potential waste exceeds threshold)
  roi_threshold_trigger:
    enabled: true
    aim_cost_usd: 600                 # Cost of running AIM (2-4 hours × $150/hr)
    roi_multiplier: 20                # Minimum 20x ROI to trigger
    waste_threshold_usd: 12000        # Auto-calculated: 600 × 20 = $12K
    monitoring_cadence: "weekly"      # Check weekly for waste signals
    
    # Signals indicating potential waste
    waste_signals:
      - signal_name: "feature_adoption_below_target"
        metric: "adoption_rate"
        threshold:
          operator: "<"
          value: "40%"                # Below 40% of target adoption
        cost_per_week: 3000           # $3K/week wasted capacity
        weeks_remaining_in_cycle: 8   # 8 weeks until quarterly AIM
        # Total waste: 8 weeks × $3K = $24K > $12K threshold → TRIGGER
      
      - signal_name: "velocity_decline"
        metric: "story_points_per_week"
        threshold:
          operator: "<"
          value: 20                   # Below 20 points/week
        cost_per_week: 5000           # Team underutilized = $5K/week
        weeks_remaining_in_cycle: 6
        # Total waste: 6 × $5K = $30K > $12K → TRIGGER

  # Trigger 2: Assumption Invalidation (RAT fails, immediate AIM)
  assumption_invalidation_trigger:
    enabled: true
    response_time_hours: 24           # Run AIM within 24 hours of failure
    
    critical_assumptions:
      - assumption_id: "asmp-001"
        assumption_text: "Target users (SMB owners) have budget authority for productivity tools"
        criticality: "critical"       # Immediate AIM if invalidated
        test_method: "user_interviews"
        invalidation_criteria: "<30% of interviews confirm budget authority"
      
      - assumption_id: "asmp-002"
        assumption_text: "Users will adopt async communication to reduce meetings"
        criticality: "high"           # AIM within 1 week if invalidated
        test_method: "feature_adoption_rate"
        invalidation_criteria: "<15% adoption after 4 weeks"

  # Trigger 3: Opportunity Capture (unexpected high-value signal)
  opportunity_trigger:
    enabled: true
    response_time_days: 3             # Evaluate within 3 days
    
    opportunity_signals:
      - signal_name: "unexpected_use_case"
        detection_method: "user_feedback_theme"
        impact_multiplier: 10         # Potential 10x larger market
        confidence_threshold: 0.7     # 70% confidence required
        # Example: Built for use case A, but 80% of users use for case B (5x market)
      
      - signal_name: "viral_feature"
        detection_method: "adoption_spike"
        impact_multiplier: 5          # 5x growth potential
        confidence_threshold: 0.8
        # Example: Feature goes viral, suggests product-market fit for different segment

  # Trigger 4: Cross-Team Dependencies (Level 3 only)
  cross_team_dependency_trigger:
    enabled: false                    # Enable when adoption_level >= 3
    dependency_check_cadence: "weekly"
    
    critical_dependencies: []
      # Example (uncomment when Level 3):
      # - dependency_id: "dep-platform-auth"
      #   dependent_team: "Team-Mobile"
      #   provider_team: "Team-Platform"
      #   required_by_date: "2025-06-30"
      #   slack_days: 14              # Trigger AIM if <14 days slack

# Notifications when triggers fire
notification_settings:
  enabled: true
  notification_channels:
    - channel_type: "email"
      target: "pm-team@example.com"
      trigger_types:
        - "roi_threshold"
        - "assumption_invalidation"
        - "opportunity"
    
    - channel_type: "slack"
      target: "#product-strategy"
      trigger_types:
        - "assumption_invalidation"   # Urgent only
        - "cross_team_dependency"

# Automated probe (Level 2-3, future capability)
probe_configuration:
  enabled: false                      # Enable when Level 2+ and AI infrastructure ready
  cadence: "weekly"
  
  data_sources: []
    # Example (uncomment when ready):
    # - source_type: "analytics"
    #   connection: "mixpanel_api_key"
    #   metrics_to_monitor:
    #     - "daily_active_users"
    #     - "feature_adoption_rate"
    # 
    # - source_type: "user_feedback"
    #   connection: "postgres://feedback_db"
    #   metrics_to_monitor:
    #     - "nps_score"
    #     - "support_ticket_volume"
  
  synthesizer_prompt: |
    Analyze monitored metrics for anomalies >20% from baseline.
    Flag if potential waste exceeds configured ROI threshold.
    Identify assumption validation/invalidation patterns.
    Recommend immediate AIM if ROI > 20x.

# Usage Instructions:
# 
# 1. Set adoption_level based on team size (0-3)
# 2. Configure aim_cost_usd (hours × hourly rate)
# 3. Set roi_multiplier (10-30x typical, higher = more conservative)
# 4. Define waste_signals relevant to your product
# 5. List critical_assumptions from your roadmap
# 6. Set up notification_channels for your team
# 
# Manual Monitoring (Level 0-1):
# - Weekly: Review waste_signals manually, calculate potential waste
# - Ask: "Is waste > threshold?" If yes, trigger AIM
# - Document decision in git commit
# 
# Automated Monitoring (Level 2-3, future):
# - Enable probe_configuration
# - Connect data_sources (analytics, feedback, etc.)
# - Synthesizer runs weekly check, flags when AIM warranted
# - Product leader reviews probe output (15 min), approves trigger
# 
# Economic Logic:
# - AIM costs $300-$900 (2-6 hours)
# - Wrong direction for 1 month costs $20K-$100K+ (depending on team size)
# - Trigger when: potential_waste / aim_cost > roi_multiplier
# - Example: $24K potential waste / $600 AIM = 40x ROI → TRIGGER IMMEDIATELY
